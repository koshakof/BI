<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="ru" xml:lang="ru"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.555">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Коршаков Александр">
<meta name="description" content="Применяем метод статистической оценки для анализа эффективности входящиз звонков в компанию, если нет CRM-системы.">

<title>Как проверить качество входящих звонков из рекламных кампаний</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="..//favicon/favicon_ihourglass.jpg" rel="icon" type="image/jpeg">
<script src="../site_libs/cookie-consent/cookie-consent.js"></script>
<link href="../site_libs/cookie-consent/cookie-consent.css" rel="stylesheet">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<link href="../site_libs/quarto-contrib/fontawesome6-0.1.0/all.css" rel="stylesheet">
<link href="../site_libs/quarto-contrib/fontawesome6-0.1.0/latex-fontsize.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "Поиск не дал результатов",
    "search-matching-documents-text": "Результаты поиска",
    "search-copy-link-title": "Скопировать ссылку",
    "search-hide-matches-text": "Скрыть дополнительные результаты",
    "search-more-match-text": "дополнительный результат в этом документе",
    "search-more-matches-text": "дополнительных результата(-ов) в этом документе",
    "search-clear-button-title": "Очистить",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Отменить",
    "search-submit-button-title": "Найти",
    "search-label": "Поиск"
  }
}</script>

<script type="text/javascript" charset="UTF-8">
document.addEventListener('DOMContentLoaded', function () {
cookieconsent.run({
  "notice_banner_type":"simple",
  "consent_type":"implied",
  "palette":"light",
  "language":"en",
  "page_load_consent_levels":["strictly-necessary","functionality","tracking","targeting"],
  "notice_banner_reject_button_hide":false,
  "preferences_center_close_button_hide":false,
  "website_name":""
  ,
"language":"ru"
  });
});
</script> 
  
<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-KB6J3FZF');</script>
<!-- End Google Tag Manager -->
<link href="../site_libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet">
<script src="../site_libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>
<link href="../site_libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet">
<script src="../site_libs/datatables-binding-0.33/datatables.js"></script>
<script src="../site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<link href="../site_libs/dt-core-1.13.6/css/jquery.dataTables.min.css" rel="stylesheet">
<link href="../site_libs/dt-core-1.13.6/css/jquery.dataTables.extra.css" rel="stylesheet">
<script src="../site_libs/dt-core-1.13.6/js/jquery.dataTables.min.js"></script>
<link href="../site_libs/crosstalk-1.2.1/css/crosstalk.min.css" rel="stylesheet">
<script src="../site_libs/crosstalk-1.2.1/js/crosstalk.min.js"></script>
<script src="../site_libs/kePrint-0.0.1/kePrint.js"></script>
<link href="../site_libs/lightable-0.0.1/lightable.css" rel="stylesheet">

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">ihourglass</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Поиск"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Переключить навигацию" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../index.html"> <i class="bi bi-house" role="img">
</i> 
<span class="menu-text"> </span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../services.html"> 
<span class="menu-text">Услуги</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../wiki.html"> 
<span class="menu-text">Wiki</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../contacts.html"> 
<span class="menu-text">Контакты</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Содержание</h2>
   
  <ul>
  <li><a href="#цель-анализа" id="toc-цель-анализа" class="nav-link active" data-scroll-target="#цель-анализа">Цель анализа</a></li>
  <li><a href="#вводные-данные" id="toc-вводные-данные" class="nav-link" data-scroll-target="#вводные-данные">Вводные данные</a></li>
  <li><a href="#загрузка-и-подготовка-данных" id="toc-загрузка-и-подготовка-данных" class="nav-link" data-scroll-target="#загрузка-и-подготовка-данных">Загрузка и подготовка данных</a></li>
  <li><a href="#анализ-активности-во-времени-по-кол-ву-слов" id="toc-анализ-активности-во-времени-по-кол-ву-слов" class="nav-link" data-scroll-target="#анализ-активности-во-времени-по-кол-ву-слов">Анализ активности во времени по кол-ву слов</a></li>
  <li><a href="#сегментный-анализ" id="toc-сегментный-анализ" class="nav-link" data-scroll-target="#сегментный-анализ">Сегментный анализ</a></li>
  <li><a href="#анализ-частотности-слов" id="toc-анализ-частотности-слов" class="nav-link" data-scroll-target="#анализ-частотности-слов">Анализ частотности слов</a></li>
  <li><a href="#анализ-ассоциированности-ключевых-слов" id="toc-анализ-ассоциированности-ключевых-слов" class="nav-link" data-scroll-target="#анализ-ассоциированности-ключевых-слов">Анализ ассоциированности ключевых слов</a></li>
  <li><a href="#корреляционный-анализ-каналов" id="toc-корреляционный-анализ-каналов" class="nav-link" data-scroll-target="#корреляционный-анализ-каналов">Корреляционный анализ каналов</a></li>
  <li><a href="#закон-ципфа" id="toc-закон-ципфа" class="nav-link" data-scroll-target="#закон-ципфа">Закон Ципфа</a></li>
  <li><a href="#вывод-по-текстовому-анализу" id="toc-вывод-по-текстовому-анализу" class="nav-link" data-scroll-target="#вывод-по-текстовому-анализу">Вывод по текстовому анализу</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Как проверить качество входящих звонков из рекламных кампаний, если нет CRM-системы и времени прослушивать каждый звонок</h1>
  <div class="quarto-categories">
    <div class="quarto-category">Анализ данных</div>
  </div>
  </div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Автор</div>
    <div class="quarto-title-meta-contents">
             <p>Александр Коршаков </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Дата публикации</div>
    <div class="quarto-title-meta-contents">
      <p class="date">20 марта 2024 г.</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<!-- Чанк для пред. настроек -->
<!-- END -->
<section id="цель-анализа" class="level2">
<h2 class="anchored" data-anchor-id="цель-анализа">Цель анализа</h2>
<p>Главная цель — понять качество входящих звонков из платной выдачи поисковых систем (рекламные кампании в Я.Директ) без привязки к CRM системе для косвенной оценки эффективности рекламных кампаний.</p>
<p>Основная гипотеза — проведя текстовый анализ мы увидим, с каким интересом (интентом, потребностью, намерением) обращаются клиенты в компанию. Если потребность соответствует деятельности компании, то трафик можно считать релевантным и качественным, а значит рекламные кампании работает правильно, т.е. привлекает целевую аудиторию. Таким образом наша нулевая и альтернативные гипотезы звучат следующим образом:</p>
<ul>
<li><span class="math inline">\(H_0\)</span> — разницы между интентом входящих звонков из платного канала и деятельностью компании нет. Это хороший исход.</li>
<li><span class="math inline">\(A\)</span> — разница есть, а значит трафик не релевантный и рекламные кампании привлекают не целевую аудиторию.</li>
</ul>
<div class="notes">
<p>Важно отметить, что доказывать релевантность платного трафика будем через сравнение с органическим трафиком (трафик из поисковых систем), так как органический трафик считается эталоном по качеству входящих звонков, при условии, что мы принимает тот факт, что SEO оптимизация сайта сделана на высоком уровне.</p>
</div>
</section>
<section id="вводные-данные" class="level2">
<h2 class="anchored" data-anchor-id="вводные-данные">Вводные данные</h2>
<ul>
<li>Рекламная кампания дается в поисковой системе Яндекс по направлению продажи тракторов.</li>
<li>Анализируемый период с 10.03.2023 по 12.04.2023.</li>
<li>За период зафиксировано <span class="math inline">\(369\)</span> звонков с платных и органических каналов.</li>
<li>Файл выгрузка с транскрибацией входящих звонков содержит <span class="math inline">\(14\ 623\)</span> строк.</li>
</ul>
</section>
<section id="загрузка-и-подготовка-данных" class="level2">
<h2 class="anchored" data-anchor-id="загрузка-и-подготовка-данных">Загрузка и подготовка данных</h2>
<p>Загрузим таблицу с данными, которая содержит транскрибацию входящих звонков.</p>
<div class="cell">
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-3302cff85bb19b321e17" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-3302cff85bb19b321e17">{"x":{"filter":"none","vertical":false,"data":[["organic","organic","organic","organic","organic"],["Все регионы","Все регионы","Все регионы","Все регионы","Все регионы"],["2023-04-12T14:55:02Z","2023-04-12T14:55:02Z","2023-04-12T14:55:02Z","2023-04-12T14:55:02Z","2023-04-12T14:55:02Z"],[18269572,18269572,18269572,18269572,18269572],["повторный","повторный","повторный","повторный","повторный"],["Клиент","Клиент","Оператор","Клиент","Оператор"],["05:40","05:43","05:45","05:52","05:56"],["Угу.","А почему?","Потому что мы территориально закреплены Краснодарскому краю и Республики Адыгея.","А мы в Крыму не можем купить почему то.","Давайте я запишу ваш номер телефона."]],"container":"<table class=\"compact nowrap\">\n  <thead>\n    <tr>\n      <th>Медиум<\/th>\n      <th>Город<\/th>\n      <th>Дата<\/th>\n      <th>ID звонка<\/th>\n      <th>Первичный звонок<\/th>\n      <th>Канал<\/th>\n      <th>Время<\/th>\n      <th>Фраза<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":10,"dom":"Btpli","language":{"url":"https:://cdn.datatables.net/plug-ins/1.13.6/i18n/ru.json"},"columnDefs":[{"className":"dt-right","targets":3},{"name":"Медиум","targets":0},{"name":"Город","targets":1},{"name":"Дата","targets":2},{"name":"ID звонка","targets":3},{"name":"Первичный звонок","targets":4},{"name":"Канал","targets":5},{"name":"Время","targets":6},{"name":"Фраза","targets":7}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p><br></p>
<p>Далее преобразуем таблицу для дальнейшего анализа.</p>
<ul>
<li>уберем стоп-слова и служебные части речи</li>
<li>проведем токенизацию слов для дальнейшего анализа</li>
<li>приведем столбцы в нужный формат</li>
</ul>
<div class="cell">
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-e41b17dff651e6a6c26e" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-e41b17dff651e6a6c26e">{"x":{"filter":"none","vertical":false,"data":[["organic","organic","organic","organic","organic"],["Все регионы","Все регионы","Все регионы","Все регионы","Все регионы"],["2023-04-12","2023-04-12","2023-04-12","2023-04-12","2023-04-12"],[18269572,18269572,18269572,18269572,18269572],["повторный","повторный","повторный","повторный","повторный"],["Клиент","Оператор","Оператор","Оператор","Оператор"],["01:57","01:57","01:57","02:00","02:00"],["трактор","примеру","трактору","спереди","поставить"],["15 Apr","15 Apr","15 Apr","15 Apr","15 Apr"],["3 Wed","3 Wed","3 Wed","3 Wed","3 Wed"],["18269572","18269572","18269572","18269572","18269572"],[100,101,102,103,104]],"container":"<table class=\"compact nowrap\">\n  <thead>\n    <tr>\n      <th>Медиум<\/th>\n      <th>Город<\/th>\n      <th>Дата<\/th>\n      <th>ID звонка<\/th>\n      <th>Первичный звонок<\/th>\n      <th>Канал<\/th>\n      <th>Время<\/th>\n      <th>Слово<\/th>\n      <th>Неделя<\/th>\n      <th>День<\/th>\n      <th>ID<\/th>\n      <th>N<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":10,"dom":"Btpli","language":{"url":"https:://cdn.datatables.net/plug-ins/1.13.6/i18n/ru.json"},"columnDefs":[{"className":"dt-right","targets":[3,11]},{"name":"Медиум","targets":0},{"name":"Город","targets":1},{"name":"Дата","targets":2},{"name":"ID звонка","targets":3},{"name":"Первичный звонок","targets":4},{"name":"Канал","targets":5},{"name":"Время","targets":6},{"name":"Слово","targets":7},{"name":"Неделя","targets":8},{"name":"День","targets":9},{"name":"ID","targets":10},{"name":"N","targets":11}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p><br></p>
<p>В итоге получили фрейм данных в котором фразы были разбиты на слова, при этом очищенный от стоп слов (предлоги, союзы, знаки препинания и т.п.)</p>
</section>
<section id="анализ-активности-во-времени-по-кол-ву-слов" class="level2">
<h2 class="anchored" data-anchor-id="анализ-активности-во-времени-по-кол-ву-слов">Анализ активности во времени по кол-ву слов</h2>
<p>Рассмотрим кол-во слов распределенных на временном промежутке.</p>
<blockquote class="blockquote">
<p><strong>График: Активность по дням</strong></p>
</blockquote>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="call_analysis_files/figure-html/unnamed-chunk-9-1.png" class="img-fluid figure-img" width="960"></p>
</figure>
</div>
</div>
</div>
<p>Стат данные к графику.</p>
<div class="cell">
<div class="cell-output-display">
<table class="lightable-paper lightable-hover caption-top table table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: right;" data-quarto-table-cell-role="th">mn</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">md</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">sd</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">se</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">max</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">min</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">delta</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">total</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">998</td>
<td style="text-align: right;">1076</td>
<td style="text-align: right;">778</td>
<td style="text-align: right;">121</td>
<td style="text-align: right;">2508</td>
<td style="text-align: right;">10</td>
<td style="text-align: right;">2498</td>
<td style="text-align: right;">40926</td>
</tr>
</tbody>
</table>


</div>
</div>
<p><br></p>
<blockquote class="blockquote">
<p><strong>График: Активность по неделям</strong></p>
</blockquote>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="call_analysis_files/figure-html/unnamed-chunk-11-1.png" class="img-fluid figure-img" width="960"></p>
</figure>
</div>
</div>
</div>
<p><strong>Вывод</strong></p>
<p>На графике видим волнообразную структуру данных, которая согласуется с днями недели. Виден четкий тренд на увеличение кол-ва слов (синяя линия), об этом также свидетельствует положительный коэффициент корреляции <span class="math inline">\(R=0.14\)</span>. Это может говорить о том, что кол-во звонков со временем поступает больше.</p>
<p>Также по красной линии тренда видно, что пик по кол-ву слов пришёлся на март и на вторую неделю апреля.</p>
<p>В среднем за период в разговоре и у клиента и у оператора употребляется от <span class="math inline">\(220\)</span> до <span class="math inline">\(1\ 776\)</span> слов, в среднем <span class="math inline">\(998\)</span>. Всего за анализируемый период было произнесено почти <span class="math inline">\(41\ 000\)</span> слов</p>
<p>Что касается дней недели. Самые активные недели были <span class="math inline">\(11\)</span> и <span class="math inline">\(12\)</span> недели марта. При этом отметим что <span class="math inline">\(13\)</span> неделя апреля пришлась на субботу и воскресенье, а так как в эти дни активности почти нет, то на графике также их не будет.</p>
<p>Рассмотрим самые активные дни недели с точки зрения использования слов.</p>
<blockquote class="blockquote">
<p><strong>График: Самые активные дни недели</strong></p>
</blockquote>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="call_analysis_files/figure-html/unnamed-chunk-12-1.png" class="img-fluid figure-img" width="960"></p>
</figure>
</div>
</div>
</div>
<p><strong>Вывод</strong></p>
<p>Самые активные дни недели с точки зрения употребления слов со среды по пятницу. Что согласуется с кол-вом поступающих звонков на эти дни. Самые не активные дни суббота и воскресенье.</p>
<p><br></p>
</section>
<section id="сегментный-анализ" class="level2">
<h2 class="anchored" data-anchor-id="сегментный-анализ">Сегментный анализ</h2>
<p>Рассмотрим кол-во употребляемых слов в разрезе «оператор и клиент».</p>
<blockquote class="blockquote">
<p><strong>График: сегменты в разрезе оператор / клиент</strong></p>
</blockquote>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="call_analysis_files/figure-html/unnamed-chunk-13-1.png" class="img-fluid figure-img" width="960"></p>
</figure>
</div>
</div>
</div>
<p><strong>Вывод</strong></p>
<p>На графике видно, что оператор использует почти в два раза больше слов, чем клиент. Возможно разница связан с работой автоответчка, а также с использованием операторами уточняющих слов.</p>
<p><br></p>
<blockquote class="blockquote">
<p><strong>График: Тренд по словам по оператору и клиенту</strong></p>
</blockquote>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="call_analysis_files/figure-html/unnamed-chunk-14-1.png" class="img-fluid figure-img" width="960"></p>
</figure>
</div>
</div>
</div>
<p><strong>Вывод</strong></p>
<p>Наблюдаем положительный рост по кол-ву слов у оператора. У клиентов кол-во слов практически не изменяется. С учетом роста повторных звонков, возможно, приходится уделять больше внимание клиенту, который находится ближе к этапу сделки.</p>
<p><br></p>
<blockquote class="blockquote">
<p><strong>График: Кол-во слов в разрезе каналов по параметру «повторный»</strong></p>
</blockquote>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="call_analysis_files/figure-html/unnamed-chunk-15-1.png" class="img-fluid figure-img" width="960"></p>
</figure>
</div>
</div>
</div>
<p><strong>Вывод</strong></p>
<p>Видно, что кол-во слов при повторном и первичном звонке отличается. Клиент и оператор используют больше слов при первичном звонке, при этом это на зависит от канала из которого пришел клиент, пропорция соблюдается.</p>
<p><br></p>
</section>
<section id="анализ-частотности-слов" class="level2">
<h2 class="anchored" data-anchor-id="анализ-частотности-слов">Анализ частотности слов</h2>
<p>Данный анализ покажет какие ключевые слова используются наиболее часто в разговоре в различных срезах. Это даст первое понимание о совпадении интента клиентов с деятельностью компании.</p>
<p>Рассмотрим частотность слов в разрезе оператор клиент.</p>
<blockquote class="blockquote">
<p><strong>График: Частотность слов в разрезе оператор - клиент</strong></p>
</blockquote>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="call_analysis_files/figure-html/unnamed-chunk-18-1.png" class="img-fluid figure-img" width="960"></p>
</figure>
</div>
</div>
</div>
<p><strong>Вывод</strong></p>
<p>У оператора мы видим ответ автоответчика, что объясняет почему оператор употребляет в два раза больше слов чем клиент. У клиента видим слова связанные с деятельностью компании. Первый признак совпадения интента.</p>
<p>Сравним ключевые слова у клиентов из органического и платного трафика. Сравниваем именно с органическим трафиком потому что считаем, что из данного канала приходят наиболее релевантные клиенты по отношению к деятельности компании.</p>
<p>Предварительно уберем из данных ряд мусорных слов, которые не несут смысловой нагрузки. В таблице приведен пример таких слов.</p>
<blockquote class="blockquote">
<p><strong>Таблица: Минус-слова</strong></p>
</blockquote>
<div class="cell">
<div class="cell-output-display">
<table class="lightable-paper lightable-hover caption-top table table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">Слово</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">ага</td>
</tr>
<tr class="even">
<td style="text-align: left;">угу</td>
</tr>
<tr class="odd">
<td style="text-align: left;">понял</td>
</tr>
<tr class="even">
<td style="text-align: left;">скажите</td>
</tr>
<tr class="odd">
<td style="text-align: left;">подскажите</td>
</tr>
</tbody>
</table>


</div>
</div>
<p><br></p>
<blockquote class="blockquote">
<p><strong>График: Частотность слов по клиентам в разрезе каналов</strong></p>
</blockquote>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="call_analysis_files/figure-html/unnamed-chunk-23-1.png" class="img-fluid figure-img" width="960"></p>
</figure>
</div>
</div>
</div>
<p><strong>Вывод</strong></p>
<p>Визуально можно увидеть, что по частотности слов у клиентов из органического и платного трафика слова практически совпадают. Интересуют в первую очередь трактора, при этом в платном канале также интересуют погрузчики и оборудование. Клиенты интересуются наличием и запрашивают коммерческое предложение. Также в платном канале интересуются лизингом.</p>
<p><br></p>
</section>
<section id="анализ-ассоциированности-ключевых-слов" class="level2">
<h2 class="anchored" data-anchor-id="анализ-ассоциированности-ключевых-слов">Анализ ассоциированности ключевых слов</h2>
<p>Однако, нас интересует не только кол-во слов, но и как они взаимосвязаны между собой. Найдем наиболее соотносимые (ассоциированные) ключевые слова через коэффициент <span class="math inline">\(phi\)</span>. Данный Коэффициент эквивалентен корреляции Пирсона.</p>
<blockquote class="blockquote">
<p><strong>График: Пример ассоциативности ключевых слов</strong></p>
</blockquote>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="call_analysis_files/figure-html/unnamed-chunk-30-1.png" class="img-fluid figure-img" width="960"></p>
</figure>
</div>
</div>
</div>
<p><br></p>
<p>На графике мы видим ключевые слова и ассоциированные слова на оси <span class="math inline">\(y\)</span>, а также видна сила корреляции по оси <span class="math inline">\(x\)</span>. Таким образом можно провести анализ запросов входящих звонков и дополнительно проверить, чем интересуются клиенты. В данном случаи запросы клиентов полностью совпадают с деятельностью компании.</p>
<p>Также можно построить граф, где будут отображены кластеры слов и их взаимосвязь, что позволит взглянуть на картину с еще большего масштаба.</p>
<p><br></p>
<blockquote class="blockquote">
<p><strong>Граф: Кластеры и ассоциативность между словами</strong></p>
</blockquote>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="call_analysis_files/figure-html/unnamed-chunk-31-1.png" class="img-fluid figure-img" width="960"></p>
</figure>
</div>
</div>
</div>
<p><strong>Вывод</strong></p>
<p>На графе отображены взаимосвязи с силой выше <span class="math inline">\(0,06\)</span> иначе граф получается не разборчив. На графе можно увидеть кластеры и наиболее сильные взаимосвязи. Например, пара «коммерческое предложение» соединена темной толстой линией. Это означает сильную ассоциативную взаимосвязь между словами.</p>
<p>Используя графы и таблицы можно найти главные интересы клиентов, что будет полезно для маркетологов, менеджеров по продажам и трафик менеджеров.</p>
<p><br></p>
</section>
<section id="корреляционный-анализ-каналов" class="level2">
<h2 class="anchored" data-anchor-id="корреляционный-анализ-каналов">Корреляционный анализ каналов</h2>
<p>Проведем корреляционный анализ, чтобы убедиться наверняка с точки зрения статистики, что запросы у клиентов из разных каналов совпадают.</p>
<blockquote class="blockquote">
<p><strong>График: Сравнение частотности слов у клиентов в разрезе каналов</strong></p>
</blockquote>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="call_analysis_files/figure-html/unnamed-chunk-33-1.png" class="img-fluid figure-img" width="960"></p>
</figure>
</div>
</div>
</div>
<p><strong>Вывод</strong></p>
<p>Слова, близкие к пунктирной линии на графиках, имеют сходные частоты в обоих наборах текстов, в то время как те, которые находятся далеко от линии, встречаются чаще в одном наборе текстов, чем в другом.</p>
<p>Например, слова «банк», «инн», «краснодаре», «погрузчик» встречаются чаще в платном канале (СРС), тогда как слова «доставка», «беларус», «вал» встречаются чаще в органическом трафике.</p>
<p>Слова которые употребляются в обоих каналах часто «трактор», «восемьдесят», «коммерческое», «предложение».</p>
<p>Обратим внимание, что множество слов распространяются на более низкие частоты (облако точек сосредоточено в нижнем левом углу графика). Эта характеристика указывают на то, что клиенты из обеих каналов используют большой объём низкочастотных слов при общении.</p>
<p>Количественно оценим, насколько похожи и различаются эти наборы частот слов, используя корреляционный тест.</p>
<p>Значение корреляции</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>[1] "corr: 0.891777092174326"</code></pre>
</div>
</div>
<p>Значение p-value</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>[1] "p-value: 5.74199052548605e-254"</code></pre>
</div>
</div>
<p><strong>Вывод</strong></p>
<p>Тест показывает, что частота употребления слов сильно коррелирует между каналами. На это указывает коэффициент корреляции <span class="math inline">\(cor≈0,9\)</span> (при норме <span class="math inline">\(0,6\)</span> и чем ближе к <span class="math inline">\(1\)</span>, тем выше корреляция). При этом уровень достоверности теста высокий и явно ниже <span class="math inline">\(0,05\)</span> на это указывает <span class="math inline">\(p-value\)</span> с <span class="math inline">\(16\)</span> знаками после запятой. Т.е. клиенты из данных каналов используют сопоставимый по объему и смыслу слова.</p>
<p>Также мы можем доказать схожесть набора текстовых данных через Закон Ципфа.</p>
<p><br></p>
</section>
<section id="закон-ципфа" class="level2">
<h2 class="anchored" data-anchor-id="закон-ципфа">Закон Ципфа</h2>
<p>Закон Ципфа (Zipf’s law) – имперический закон, согласно которому частота появления слова обратно пропорциональна его рангу. Т.е. чем реже встречается слово в наборе данных, тем выше ранг. Вычисляете по формуле:</p>
<p><span class="math display">\[freq(r)=A \times N \times r^{-1}\]</span></p>
<ul>
<li><span class="math inline">\(freq(r)\)</span> – частотность слова с рангом <span class="math inline">\(r\)</span></li>
<li><span class="math inline">\(r\)</span> — ранг слова в списке слов, упорядоченных по убыванию частоты</li>
<li><span class="math inline">\(N\)</span> – общее количество слов или символов в тексте</li>
<li><span class="math inline">\(A\)</span> – константа, которая зависит от конкретного текста и языка, обычно <span class="math inline">\(0.1\)</span></li>
</ul>
<p>Формула говорит, что если ранг слова увеличивается в два раза, то его частота встречаемости уменьшается в два раза. С другой стороны, чем меньше ранг слова, тем выше его частота встречаемости.</p>
<p>Рассмотрим как распределились слова по частотности в разрезе каналов (переменная <span class="math inline">\(TF\)</span> по оси <span class="math inline">\(x\)</span>).</p>
<p><br></p>
<blockquote class="blockquote">
<p><strong>График: Распределение частотности слов в разрезе каналов</strong></p>
</blockquote>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="call_analysis_files/figure-html/unnamed-chunk-40-1.png" class="img-fluid figure-img" width="960"></p>
</figure>
</div>
</div>
</div>
<p><strong>Вывод</strong></p>
<p>На графике, в обоих наборах данных видим длинные хвосты т.е. чрезвычайно редкие слова. График демонстрирует схожее распределение для каналов, с большим количеством слов, которые встречаются редко, и меньшим количеством слов, которые встречаются часто.</p>
<p>Закон Ципфа визуализируется путем построения ранга по оси <span class="math inline">\(x\)</span> и частоты членов по оси <span class="math inline">\(y\)</span> в логарифмических масштабах. При построении графика таким образом, обратно пропорциональная зависимость будет иметь постоянный отрицательный наклон.</p>
<p><br></p>
<blockquote class="blockquote">
<p><strong>График: Закон Ципфа</strong></p>
</blockquote>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="call_analysis_files/figure-html/unnamed-chunk-42-1.png" class="img-fluid figure-img" width="960"></p>
</figure>
</div>
</div>
</div>
<p><strong>Вывод</strong></p>
<p>Видим на графике, что оба текстовых набора данных по каналам очень похожи между собой и что зависимость между рангом и частотой имеет отрицательный наклон (чем выше ранг, тем ниже частотность <span class="math inline">\(TF\)</span>).</p>
<p>Особое внимание на пунктирную линию. Это значение степенного закона средней части набора данных для слов с рангом от <span class="math inline">\(10\)</span> до <span class="math inline">\(500\)</span>. Мы видим, что основная масса слов лежит на пунктирной линии, при этом обе линии накладываются друг на друга. Что говорит о высокой схожести набора данных. Это доказывает, что обращения из платного канала схожи с обращениями из органической выдачи.</p>
<p><br></p>
</section>
<section id="вывод-по-текстовому-анализу" class="level2">
<h2 class="anchored" data-anchor-id="вывод-по-текстовому-анализу">Вывод по текстовому анализу</h2>
<p>С помощью двух методов анализа (корреляционный анализ и закон Ципфа), мы доказали схожесть текстовых набора данных между платным и органическим каналами. Таким образом принимаем нашу нулевую гипотезу о том, что разницы между интеном во входящих звонках из платного канала и входящих звонках из органического трафика НЕТ. Т.е. клиенты из обеих каналов обращаются в компанию с одними и теми же интересами.</p>
<p>Принимаем гипотезу:</p>
<ul>
<li>H0 — разницы между интентом входящих звонков из платного канала и деятельностью компании нет.</li>
</ul>
<p>Данный анализ применим и для других источников трафика, главное условие это наличие качественного органического трафика, либо набора ключевых слов (семантическое ядро), которые описывают деятельность компании.</p>


</section>

</main> <!-- /main -->
<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KB6J3FZF" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Скопировано");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Скопировано");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
          // target, if specified
          link.setAttribute("target", "_blank");
          if (link.getAttribute("rel") === null) {
            link.setAttribute("rel", "noopener");
          }
          // default icon
          link.classList.add("external");
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p>Copyright 2024, Коршаков Александр</p>
</div>   
    <div class="nav-footer-center">

<div class="cookie-consent-footer"><a href="#" id="open_preferences_center">Cookie Preferences</a></div></div>
    <div class="nav-footer-right">
<p>Сайт создан с помощью <a href="https://www.r-project.org/about.html" target="_blank"><i class="fa-brands fa-r-project" title="R Project" aria-label="r-project"></i></a> and <a href="https://quarto.org/" target="_blank">Quarto</a></p>
</div>
  </div>
</footer>




</body></html>