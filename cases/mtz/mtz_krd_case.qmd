---
title: "Как продавать сложные продукты в В2В в условиях кризиса с минимальным бюджетом"
subtitle: "Раскрываем подробный разбор на примере тракторов «Беларус™»"
author: "Александр Коршаков"
date: "2023-02-17"
date-format: long
format:
  html:
    page-layout: article
    toc: true
    toc-location: right
    fig-width: 10
    fig-height: 6
    pagetitle: "Кейс: Как продавать сложные продукты в В2В в условиях кризиса с минимальным бюджетом | Hourglass"
    description-meta: "Кейс в нише сельхозтехники и тракторов"
    date-meta: "2024-08-26"
    author-meta: "Коршаков Александр"
    math: mathjax
execute:
  warning: false
  message: false
  error: false
  echo: false
editor_options:
  chunk_output_type: console
draft: true  
---

```{r setup lybrary, include = FALSE}

# libraries
library(tidyverse, warn.conflicts = FALSE)
library(kableExtra, warn.conflicts = FALSE)

# set knitr optn
knitr::opts_template$set(my_tmpl=list(message=FALSE, warning=FALSE, cache=TRUE))

```


# О клиенте

Заказчик --- филиал Торгового дома МТЗ-Северо-Запад г.Краснодар. Официальный дистрибьютор «Минского тракторного завода» («МТЗ») на территории Краснодарского края и Республики Адыгея. Занимаются продажами тракторов «Беларус» и сельскохозяйственной техники.

![](img/site_mtz.png)

Компания поставляет продукцию фермерским хозяйствам, колхозам, агрохолдингам и другим предприятиям занимающиеся сельским хозяйством.

# Задача

Получить $N$-е кол-во заявок из «Яндекс Директ» при минимальных бюджетах. При этом не ставились конкретные KPI по количеству обращений и стоимости. Однако были определены:

* ежемесячный бюджет;
* регионы трансляций объявлений;
* ключевые слова участвующие в таргетинге (семантическое ядро).


# Что было на старте

У компании есть свой [сайт](https://tdmtz-kr.ru/), созданный нашей
компанией ранее. Сайт имел чёткую структуру и подготовлен к SEO-сопровождению. Это важно, так как при запуске рекламы сервис оценивает по множеству параметров посадочную страницу и если она не качественная, рекламная компания получит меньше показов.

На сайте присутствовал счетчик «Яндекс Метрики», но требовалась дополнительная настройка целей по обращению в компанию через «JivoSite» и входящих звонков.


# Проблемы проекта

1.  Компания, после «ковидных» времен и начала «СВО» не была готова
    тратить большие бюджеты на привлечение клиентов из платных каналов.

2.  Необходимо подключить CRM систему к «Яндекс Метрике» для передачи
    данных о качестве звонков, однако у компании «ТД МТЗ» возникли
    внутренние проблемы со связкой «1C™» и CRM системой. Данной интеграцией
    занималась сторонняя компания. В итоге до запуска проекта проблему
    решить не удалось и принято решение анализировать результаты
    кампаний на уровне обращений, а не на уровне «качественных звонков».

3.  Так как KPI не были установлены, до запуска рекламных кампаний необходимо определить теоретическое возможное кол-во обращений в компанию, а также узнать «вилку» по бюджету, чтобы понимать хватит ли установленного бюджета.

4.  Важно понять какое кол-во обращений возможно получить, так как от
    этого зависит настройка аналитики для обучения автоматических
    стратегий рекламных сервисов.


# Подготовка

В нашей работе мы большое внимание уделяем подготовительному этапу.

Сначала необходимо провести Ситуационный Маркетинговый Анализ (СМА). СМА — это фундамент будущей стратегии привлечения клиентов. Нет фундамента — нет гарантий, что стратегия будет работать.  Необходимо понимать с кем мы будем конкурировать, в каких регионах наибольшая конкуренция, какие УТП транслируют в объявлениях конкуренты. Также необходимо предсказать теоретический объём обращений и необходимый бюджет для установки KPI.

Ситуационный анализ состоит из следующих пунктов:

* анализ рынка,
  + анализ семантического ядра,
  + анализ конкурентов,
  + предиктивная аналитика,
* аудит аналитических систем,
* анализ сайта.

Разберем каждый пункт подробнее.



## Анализ рынка

Анализ рынка состоял из следующих пунктов:

* анализ семантического ядра,
* анализ конкурентов,
* предиктивная аналитика.

### Анализ семантического ядра

Анализ семантического ядра дает понимание о том, какое кол-во ключевых слов
имеют показы в рекламных системах. Приблизительные бюджеты на основе
данных рекламных сервисов, а также предсказать возможный объем обращений
в компанию.



#### Общая структура ядра

Для рекламной компании по тракторам собрали $239$ ключевых слов.
Ключевые слова отбирались по частотностям из сервиса «Яндекс подбор
слов», но это не означает, что у всех ключевых слов из нашего списка
будут показы в «ЯДирект». Поэтому необходимо собрать статистику по
показам и стоимости клика из «ЯДирект». В итоге получили таблицу для
дальнейшего анализа. Ниже показаны первые пять строк исходной таблицы.

> **Таблица: пример семантического ядра**

```{r table, echo=FALSE, opts.label='my_tmpl', results = 'asis'}

core <- vroom::vroom(file = normalizePath('~/ihourglass/cases/mtz/table/core.csv'), delim = ';')

core[1:3, ] |> 
  kbl()  |> 
  kable_paper(lightable_options = c("striped", "hover", "condensed", "responsive"))

```


Обычная таблица, однако уже на этом этапе можно получить полезную
информацию. Рассмотрим общую картину по ядру.


> **Таблица: общая статистика по ядру**

```{r table sum, echo=FALSE, opts.label='my_tmpl', results = 'asis'}

sum_core <- vroom::vroom(file = 'table/sum_core.csv', delim = ';')

sum_core |>  
  kbl() |> 
  kable_paper()

```


**Вывод**

Видим различия между медианной и средней ценой клика. Это значит, что в
ядре содержаться преимущественно ключевые слова ниже средней стоимости
клика. Проверим предположение на графике.

> **График: распределение ключевых слов по стоимости клика**

![](img/расп цены клика.png)
Действительно видно, что большинство ключевых слов из нашего ядра сгруппированы по стоимости клика в диапазоне от 25₽ до 40₽.

Также узнали, что разброс вокруг средней цены клика $sd$ ≈ 17₽, т. е. стоимость клика может отличаться от среднего значение в большую или меньшею сторону на указанную сумму.



#### Ключевые слова с нулевыми показами

Часто бывает, что в утвержденной семантике, после сбора частот в
рекламном сервисе, содержатся ключевые слова с нулевыми показами. Данные
слова необходимо исключить из рекламных кампаний, так как по ним не будет показов и в процессе анализа будет легче и быстрее работать.

> **Таблица: пример ключевых слов с нулевыми показами**

```{r table zero keys, echo=FALSE, opts.label='my_tmpl', results = 'asis'}

zero_keys <- vroom::vroom(file = 'table/zero_keys.csv', delim = ';')

zero_keys[1:3,] |> 
  kbl() |> 
  kable_paper(lightable_options = c("striped", "hover", "condensed", "responsive"))

```



#### Распределение ключевых слов

Рассмотрим распределение частотности показов по группам, тем самым
узнаем по каким группам ожидается большее кол-во обращений. Это полезно
учитывать, когда у вас в рекламной кампании разные продукты. Например,
кредитные карты для физ. и юр. лиц или различные виды сельхозтехники и
т.п.

График ниже приведен без названия групп из-за политики NDA.

> **График: распределение ключевых слов по показам в разрезе групп**

![](img/fq_keys_by_groups_blur.png)

**Вывод**

Выяснили, что как минимум четыре группы имеют ключи с большим охватом. В данных группах ожидается большее число кликов, а значит именно с этих группу будут в первую очередь приходить заявки. Также ожидаем, что данные группы будут быстрее расходовать бюджет.

Такой же график можно создать для распределения по стоимости клика, тем самым узнать какие группы содержать наиболее дорогие ключевые слова и взять группы на контроль.



### Конкуренты

Методология отбора конкурентов в платной выдаче «Яндекс» строится на гипотезе, что чем больше показов у домена конкурента по выбранным ключевым словам (т. е. чем больше доля охвата), тем больше трафика получает домен, а значит это наши конкуренты в сети. Это не значит, что домен может быть нашим прямым конкурентом. Прямыми конкурентами считаются компании, которые  предоставляют те же услуги и продукты, что и ваша компания, в том же регионе.



#### Конкуренты и охват 

По нашему семантическому ядру, в платной выдаче, обнаружено $52$ сайта конкурентов. На графике представлены ТОП $10$ конкурентов и их доля охвата (из-за NDA на графике можем показать только первых трех конкурентов).

> **График: сайты конкурентов и охват**

![](img/comp_reach.png)  
  
**Вывод**

Видим, тройку лидеров по охвату, а значит это наши основные конкуренты в аукционе «ЯДиректа». Отметим, что прямой конкурент только один «am-volga.ru». Площадка «spec.drom.ru» скорее косвенный конкурент, однако, по большому счету, это не имеет значение, так как конкурировать за показы наши объявления, в основном, будут с сайтами из ТОП $10$.

Кстати, если площадка занимается самопродвижением, то стоит взять её на заметку. Рекомендуем разместиться на ней для привлечения потенциально заинтересованных клиентов.

Рассмотрим как конкуренты распределились по группам. В таблице увидим кол-во сайтов и объявлений на каждую группу, таким образом узнаем наиболее конкурентную группу.

Так как это пример, то покажем $3$ группы из $23$ и средние значения.

> **Пример таблицы: кол-во сайтов и объявлений в разрезе групп**

```{r table sites by groups, echo=FALSE, opts.label='my_tmpl', results = 'asis'}

comp_case <- vroom::vroom(file = 'table/comp_case.csv', delim = ';')

comp_case |>  
  kbl() |> 
  kable_paper(lightable_options = c("striped", "hover", "condensed", "responsive")) |> 
  row_spec(4:5, bold = TRUE, color = "white", background = "#8C9599")

```



**Выводы**

В среднем у нас $14$ сайтов конкурентов и $16$ объявлений на группу. Разброс по сайтам составляет $\pm\ 4$. Высокая конкуренция наблюдается в первых двух группах из таблицы, значит ожидается высокая стоимость клика в данных группах. 



#### Распределение конкурентов по позициям

Проверим гипотезу есть ли зависимость по охвату от занимаемой средней позиции. Как правило, чем выше средняя позиция, тем больше трафика получает сайт.

![](img/qqplot_avr.pos_reach.png)
  
**Вывод**

В данной нише гипотеза не подтвердилась. Данный вывод подтверждает значение $p-value = 0.97$ (при норме $p-value=0,05$, т.е. при данном значении гипотеза проходит проверку). Значит в данной нише не имеет значение, на какой позиции находится объявление.Трафик может собираться как с верхнего, так и с нижнего блока в выдачи поисковой системы «Яндекс».

Также заметим, что основная масса конкурентов получает небольшой объем трафика, по нашему семантическому ядру, что даёт нам возможность собрать более $80\%$ трафика, а значит есть вероятность получить максимум из нашей рекламной кампании.



#### Анализ регионов

Рассмотрим в каких регионах транслируют объявления конкуренты.

> **Пример таблицы: частота использования регионов в объявлениях в разрезе конкурентов**

```{r table regions_dom, echo=FALSE, opts.label='my_tmpl', results = 'asis'}

regions_dom <-  vroom::vroom(file = 'table/regions_dom.csv', delim = ';')

regions_dom[1:5, ] |> 
  kbl() |> 
  kable_paper(lightable_options = c("striped", "hover", "condensed", "responsive")) |> 
  column_spec(
    column = 4, 
    color = "white",
    background = spec_color(regions_dom$Коэф, end = 0.6, alpha = 0.8)
    )

```

Выясним какие регионы наиболее конкуренты.

> **Пример таблицы: частота использования регионов в объявлениях**

```{r table regions, echo=FALSE, opts.label='my_tmpl', results = 'asis'}

regions <-  vroom::vroom(file = 'table/regions_sep.csv', delim = ';')

regions[1:5, ] |> 
  kbl() |> 
  kable_paper(lightable_options = c("striped", "hover", "condensed", "responsive")) |>  
  column_spec(
    column = 3, 
    color = "white",
    background = spec_color(regions$Коэф, end = 0.6, alpha = 0.8)
    )
```

**Вывод**

Введя синтетический коэффициент в соответствующем столбце можно быстро определить самый популярный регион --- Россия. На втором месте Краснодарский край и Ростовская область. В данных регионах ожидается повышенная конкуренция. При создании рекламных кампаний необходимо учитывать кол-во регионов в которых планируется транслировать объявления.



#### Анализ объявлений конкурентов

Собрав данные по объявлениям конкурентов из поисковой выдачи мы можем провести их анализ. Узнаем какие слова используют в заголовках и текстах объявлений чаще всего. На что делают акцент. Из этих данных будет понятно как можно отстроится от конкурентов или что нужно использовать в заголовках обязательно.

> **Пример таблицы: анализ объявлений**

```{r table join titles, echo = FALSE, opts.label='my_tmpl', results = 'asis'}

title_join <-  vroom::vroom(file = 'table/title_join.csv', delim = ';')

title_join[1:10, ] |> 
  kbl() |> 
  kable_paper(lightable_options = c("striped", "hover", "condensed", "responsive"))

```

В таблице указана частота однословных и двухсловных ключевых слов из объявлений конкурентов. Изучив всю таблицу сделаем выводы, на что делают упор и как составляют объявления конкуренты.

Также можем посмотреть ключевые слова в разрезе групп и сайтов конкурентов.

> **Пример таблицы: анализ объявлений в разрезе групп и сайтов**

```{r table titles dom, echo = FALSE, opts.label='my_tmpl', results = 'asis'}

titles_dm <-  vroom::vroom(file = 'table/titles_dm.csv', delim = ';')

titles_dm[1:10, 1:4] |> 
  kbl() |> 
  kable_paper(lightable_options = c("striped", "hover", "condensed", "responsive"))
  
```



#### Анализ УТП прямых конкурентов на сайте

Провели анализ сайтов прямых конкурентов. В итоге получили следующую таблицу с данными.

> **Пример таблицы: анализа посадочных страниц конкурентов**

Конкурент|УТП|Преимущества|SEO desk|SEO mob|Принцип соответствия|Стоимость
---|---|---|---|---|---|---
«АгроМаркет ВОлга»УТП|5/10|7/10|7/10|6/10|10/10|0/10
Конкурент «N»|...|...|...|...|...|...
«ТД МТЗ»|5/10|9/10|8/10|7/10|NA|5/10

Вывели итоговые оценки качества по всем конкурентам, что дает понимание как обстоят дела в нише.

> **Пример таблицы: итоги анализа посадочных страниц конкурентов**

```{r table qs, echo = FALSE, opts.label='my_tmpl', results = 'asis'}

qs<- vroom::vroom(file = 'table/qs.csv', delim = ',')

qs |> 
  kbl() |> 
  kable_paper(lightable_options = c("striped", "hover", "condensed", "responsive"))

```

Полученные данные используются для улучшения собственного сайта компании.

**Вывод**

* Собрали данные по объявления конкурентов. Сделали выводы, как и что будем писать в объявлениях.
* Данные по анализу сайтов конкурентов использовали для улучшения сайта компании.



### Предиктивная аналитика

В данном разделе рассчитаем реально достижимый объем рынка (Serviceable & Obtainable Market). Нам необходимо понять примерное кол-во обращений, которое мы можем получить на уровне сформированного спроса. Это поможет установить KPI на который мы будем ориентироваться.

Примерно кол-во обращений в месяц определяется через распределение
Пуассона. Вычисляется двумя методами:

1.  Исходя из рекламного бюджета и средней цены клика.
2.  Исходя из частотности показа ключевых слов и среднего $ctr$.
  


#### Расчет исходя из бюджета

Исходя из месячного бюджета, согласно расчетам, с $\approx 90\%$ вероятностью получим от $27$ до $50$ обращений в месяц, в среднем $≈40$. При условии, что средняя цена клика CPC ≈ 39₽, а конверсия из клика в обращение $CR≈4\%$ (данные по $CR$ взяты из «ЯМетрики» клиента).

> **График: диапазон получения заявок исходя из бюджета**

```{r puasson budget, echo=FALSE, opts.label='my_tmpl'}

visualize::visualize.pois(stat = c(27, 50), lambda = 1000*0.04, section = "bounded", strict = c(0,1))

```



#### Расчет исходя из частотности показов и $ctr$

Сначала рассчитаем кол-во переходов исходя из средней частоты по ежемесячным показам. Нужно получить среднее значение по кликам.

При условии, что средний $ctr≈10\%$, а среднее кол-во показов в месяц по утвержденным ключевым словам $\approx 7000$. Тогда с $≈90\%$ вероятностью получим от $640$ до $750$
переходов по объявлениям из поиска в месяц, в среднем $≈700$.

> **График: диапазон получения кликов**

```{r puasson clicks, echo=FALSE, opts.label='my_tmpl'}

visualize::visualize.pois(stat = c(640, 750), lambda = 7000*0.1, section = "bounded", strict = c(0,1))

```

Тогда с $≈90\%$ вероятностью получим от $15$ до $41$ заявок в месяц, в среднем $≈28$.

> **График: диапазон получения заявок**

```{r puasson lids, echo=FALSE, opts.label='my_tmpl'}

visualize::visualize.pois(stat = c(15, 41), lambda = 700*0.04, section = "bounded", strict = c(0,1))

```

И рассчитаем вероятность получить продажи исходя из среднего значения по обращениям. По данным исследования [Roistat](https://roistat.com/rublog/issledovanie-kak-okupaetsya-internet/) средняя конверсия из обращения в продажу в В2В $≈17\%$, тогда с $≈90\%$ вероятностью получим от $1$ до $10$ продаж в месяц, в среднем $≈5$.

> **График: диапазон получения продаж**

```{r puasson sell, echo=FALSE, opts.label='my_tmpl'}

visualize::visualize.pois(stat = c(1, 10), lambda = 28*0.17, section = "bounded", strict = c(0,1))

```


**Вывод**

Главный вывод --- возможно получить продажи с семантического ядра. 

Сформируем «вилку» бюджета. Расчет произведем исходя из частотности показов и среднего $ctr$.

```{r table budget, include=FALSE, opts.label='my_tmpl'}

`90% вероятность`   <- c("Нижняя граница", "Средняя", "Верхняя граница")
`Цена клика`   <- c(52)
`Переходы` <- c(640, 700, 750)
`Обращения`         <- c(15, 28, 41)
`Клиенты`           <- c(1, 5, 10)

(recom_budget <- tibble(`90% вероятность`, `Цена клика`, `Переходы`, `Обращения`, `Клиенты`) |> 
    mutate(`Бюджет месяц` = round(`Цена клика` *`Переходы`),
           CPA            = ifelse(Обращения == 0, 0, round(`Бюджет месяц` / `Обращения`)),
           CAC            = ifelse(Клиенты == 0, 0, round(`Бюджет месяц` / `Клиенты`))
    ) |> 
    relocate(`Бюджет месяц`, .after = `Переходы`) |> 
    relocate(CPA, .after  = Обращения) |> 
    mutate(`Цена клика`   = paste0(format(`Цена клика`, big.mark = " ", trim = TRUE), "₽"),
           `Бюджет месяц` = paste0(format(`Бюджет месяц`, big.mark = " ", trim = TRUE), "₽"),
           CPA            = paste0(format(CPA, big.mark = " ", trim = TRUE), "₽"),
           CAC            = paste0(format(CAC, big.mark = " ", trim = TRUE), "₽")
    )
)

```

```{r budget, echo = FALSE, opts.label='my_tmpl', results = 'asis'}

recom_budget |>  
  kbl() |> 
  kable_paper(lightable_options = c("striped", "hover", "condensed", "responsive"))

```

Теперь знаем:

* ожидаемый диапазон по бюджету без НДС,
* диапазон обращений,
* диапазон продаж.

Следует учитывать:

1. На цену клика влияет множество факторов от кол-ва участников в аукционе на конкретный момент до качества сайта и объявлений, регионов показа и типа устройств, плюс еще $≈10\ 000$ параметров, которые учитывает система при проведении аукциона. Поэтому итоговый бюджет может варьироваться. 

2. Следует понимать данные расчеты в разрезе когорт. Например, выделить когорту людей обратившихся в компании в августе. Из данной когорты люди могут конвертироваться в клиентов в течении года, однако, если рассмотреть сколько людей из августовской когорты перешли в статус клиента в течении года, то можно выделить коэффициент конверсии для данной когорты, а также итоговое кол-во клиентов их стоимость и другие метрики. Однако для таких расчетов необходима связь с CRM системой.


## Аудит аналитических систем

Аудит аналитики — это подготовка и проверка систем аналитики к приему и анализу входящего трафика. Он включает в себя следующие пункты:

* анализ структуры аналитики;
* корректность установки счетчика;
* какие цели отслеживаются в «ЯМетрике»;
* какие цели отслеживаются в «ЯДирект»;
* какие сегменты настроены и применяются ли в «ЯДирект»;
* применяется ли «сквозная аналитика» (анализ по ROMI или ДДР).

Здесь не будем подробно расписывать каждый пункт. Обозначим ключевые моменты.

* Решено использовать «ЯМетрику», так как источником трафика будет «Яндекс Директ».

* По итогам сит анализа мы выяснили, что кол-во обращений в компанию ожидается в диапазоне от $15$ до $40$. Этого мало для обучения автоматических стратегий. Поэтому необходимо провести дополнительные настройки по отслеживанию микро и макроцелей.

* Нет сквозной аналитики. Т. е. нет возможности передать данные из CRM системы в «ЯМетрику». Это значит, что мы не можем оптимизировать рекламные кампании на уровне «качественных обращений». «Качественные обращения» --- «$50\%$-ные** клиенты» или «квалифицированные клиенты» соответствующие критерию «четырех П» или технология «BANT». По другому потенциальные клиенты, готовые выслушать условия продажи продукции компании. Однако, по итогам проведенной рекламной кампании, мы нашли способ проверить на сколько качественно поступает трафик из РК. Об этом расскажем в отдельном кейсе.


## Аудит сайта

Главная задача --- проверить готовность сайта к приему трафика по следующим параметрам:

* SEO оптимизация сайта:
  + техническая оптимизация,
  + юзабилити,
  + коммерческие факторы.

Полученные данные сравнили с таблицей качества по конкурентам. Внесли необходимые исправления на сайт.


# Реализация

В этой части расскажем как проходила реализации на основе проведенного ситуационного анализа.


## Тезисы и гипотеза

Из ситуационного анализа сформулируем ряд тезисов:

* Указанный заказчиком бюджет попадает в «вилку» по бюджетам рассчитанный нами. Значит мы можем запускать рекламные кампании.
* Подобранное нами семантическое ядро имеет возможность привести клиентов на уровне сформированного спроса.
* После группировки ключевых слов у нас имеется ряд групп, которые будут приводить клиентов в первую очередь:
  + минитракторы,
  + группа А,
  + группа В ...
* Имеем дело с сильной конкуренцией, особенно учитывая рекламный бюджет. Поэтому необходимо правильно выбрать регионы и уделить особое внимание составлению объявлений.
* Учитывая прогнозы по достижению целей по обращениям необходимо провести ряд настроек в системах аналитики для обучения автоматических стратегий в рекламных системах.
* На сайте необходимо провести ряд работ для улучшений параметров, которые помогут участвовать в аукционе на более выгодных условиях.

Гипотеза в нашем случае очень проста. Если подходить с точки зрения статистики, то нулевая и альтернативная гипотезы звучат так:

* $H_0$ --- рекламная система «ЯДирект» не сможет генерировать обращения, а те которые будут это случайность

* $A$ --- рекламная система стабильно генерирует обращения и работает со стабильной мощностью.


## Структура рекламных кампаний

При составлении структуры ориентировались на следующие параметры:

* Необходимо собирать как можно больше данных по макро и микроцелям для обучения автоматических стратегий. Поэтому дробить семантику на мелкие рекламные кампании нельзя.

* Имеем ограниченный бюджет, поэтому работаем с ограниченным числом ключевых слов. Особое внимание уделяем ключевым словам с большой частотностью.

В итоге: 

* Получили одну рекламную компанию состоящую из $23$ групп. 
* Ключевые слова сгруппированы по смыслу.
* Кол-во ключевых слов в группе варьируется от $2$ до $22$.
* В каждой группе от $2$ до $4$ объявлений в зависимости от суммарной частотности ключевых слов в группе. Чем больше в группе объявлений, тем больше времени нужно для набора стат информации, чтобы определить лучшее объявление.

![](img/camp.jpg)

## Реализация аналитики

В данном проекте схема аналитики выглядит следующим образом:

![](img/analytics.jpg)

Главная задача это учесть все источники обращения в компанию.

Все данные с сайта и сторонних сервисов собираются в «Метрике». «Метрика» и «ЯДирект» обмениваются данными. По API данные из «Метрики» и «Директа» передаются в RStudio, где мы проводим основную аналитику эффективности нашей стратегии.

RStidio обладает широким функционалом по предоставлению отчетов. Отчеты можно передавать в Гугл таблицы, отсылать по email или Telegram™. Или передавать данные в различные BI системы построения отчетов. Также можно настроить отчеты на собственных серверах.

 В «Метрике» настроили цели:

* обращение с форм на сайте;
* отправка или копирование email компании;
* отслеживание входящих звонков;
* обращение через виджет;
* плюс настроены ряд микро целей.

Как мы уже знаем, данные по микроцелям собираются быстрее и их значительно больше. Проведя корреляционный анализ совместно с многофакторным дисперсионным анализом (ANOVA) можно определить какие микроцели предшествуют достижению макроцели. Таким образом настроив «ЯДирект» на получение микроцелей обучим систему, которая по итогу будет приводить макроцели.

В наших рекламных кампаниях мы стараемся использовать автоматические стратегии, так как они показывают наилучший результат по сравнению с ручными стратегиями. Дело в том, что в авто режиме система учитывает десятки тысяч факторов, а специалист физически не способен учесть такое кол-во факторов при управлении кампаниями в ручном режиме.


### Сложности при реализации

После сбора данных провели ряд анализов, которые должны были определить предшествующие макроцелям микроцели. Однако столкнулись с проблемой. По итогам анализа ни одна макроцель не коррелировала с микроцелью. Тогда мы решили создать специальную цель в которой будут собираться данные со всех источников обращений. И такой шаг в итоге показал свою эффективность.

Также в процессе реализации проекта были месяцы в которых, по разным причинам, не собирались данные с некоторых источников обращения в компанию, что повлияло на общее кол-во достижений целей в статистике. 

## Итоги

Рассмотрим итоги нашей работы.

> **График: обзор обращений за весь период**

![](img/6с Общ ситуация.png)
На графике сразу видем что в августе и сентябре у нас были проблемы со сбором данных по обращению. Некоторые каналы обращений не отслеживались по разным причинам. В октябре снова наладили аналитику.

Рассмотрим плотность распределения обращений.

> **График: плотность распределения обращений в компанию**

![](img/6с плотность расп лидов.png)

Видим, что рекламные кампании чаще не получали заявок. Это ожидаемо, так как учитывая специфику товара не стоит ожидать обращений в компанию каждый день. Больше всего получали по одному обращению в день. Реже по $2-3$ обращения. Вполне ожидаемое $F$-распределение заявок в данной нише.

Рассмотрим кол-во заявок по месяцам.

> **График: кол-во обращений по месяцам**

![](img/6с кол-во лидов по месяцам.png)

Обратим внимание, что наши расчеты по кол-ву обращений в месяц входят в рассчитанный диапазон, кроме неактивных месяцев. В среднем мы получали $30$ заявок в месяц. Наш прогноз от $15$ до $41$ заявки в месяц.

> **График: обращение лидов с накоплением**

![](img/plot with accumulation.png)

На этом графике можно быстро определить в какие месяцы было больше или меньше всего обращений. 

> **Как итог наша система привлечения трафика построенная на основе ситуационного анализа работает. Заявки с рекламной кампании на поиске поступали стабильно и они не были случайны. Таким образом принимаем альтернативную гипотезу сформированную ранее.**

Далее проведем анализ нашей системы привлечения трафика с точки зрения шести сигм.

  
## Шесть сигм

Каждый источник трафика генерирует обращения в определенных границах. Границы называют «границей шести сигм». Они рассчитываются с помощью «ГОСТ стандарта контрольных [карт Шухарта](https://docs.cntd.ru/document/1200025672)» и набранных статистически значимых показателей (продажи, обращения, регистрации, клики и т. п.). 

Зная границы шести сигм:

* знаем мощность источника трафика т.е. в каких границах мы можем ожидать ежедневных продажи / регистрации и так далее;
* знаем на сколько хорошо контролируем систему;
* становиться ясно какие KPI должны быть выставлены трафик менеджерам и менеджерам по продажам;
* на основе данных строим предиктивную аналитику для отслеживания тренда, что позволяет вовремя вносить изменения в рекламные кампании.

Не будем подробно описывать методологию расчетов, об этом напишем в отдельном кейсе. Сразу рассмотрим график и сделаем выводы.

![](img/6 sigms.png)

На графике красной пунктирной линией обозначены верхняя и нижняя контрольные границы. Они показывают диапазон в котором работает наша система привлечения обращений. В нашем случаи диапазон от $0$ до $4$ обращений в день. По другому это мощность нашей системы. Мы не знаем хорошо это или плохо, но так работает наша система. Не стоит переживать, если в какие-то дни мы не получаем заявки. Для данной системы привлечения трафика это норма. 

Однако, стоит обращать внимание на дни когда кол-во заявок выходит за пределы верхних границ. Такие дни нужно анализировать и стараться масштабировать. В нашем случаи такие выходы были сразу после запуска компании. Скорее всего проводились доп тесты по отправке заявок с сайта разработчиками сайта. Также замечены выходы за пределы в мае и в конце года. Как сообщил наш клиент в конце года всегда идёт ажиотаж и это норма.

Данный анализ особенно хорош для компаний у которых заявки в основном приходят в физических точках продаж: общепит, недвижимость, авто и другие ниши.

# Что дальше

Так как у нас проблема с определением качества заявок, следующий шаг разработать метод определения качества заявок без связки с CRM системой. Метод основывается на текстовом анализе входящих звонков, обращений через виджеты и заявок с сайтов.

На этом все. Благодарим за внимание!

Хотите запуск рекламных кампаний по нашей системе? Пишите на email: [i\@akorshakov.ru](mailto:i@akorshakov.ru){.email}

