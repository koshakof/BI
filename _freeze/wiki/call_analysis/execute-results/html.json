{
  "hash": "3df039af5e2c25ce7e7b20494ab76371",
  "result": {
    "markdown": "---\nlang: ru\ntitle: 'Как проверить качество входящих звонков из рекламных кампаний, если нет CRM-системы и времени прослушивать каждый звонок'\ndate: today\ndate-format:  D dddd MMM YYYY\nformat:\n  html:\n    toc: true\n    toc-location: left\n    # page-layout: full\n    cap-location: top\neditor_options:\n  chunk_output_type: console\nexecute:\n  warning: false\n  message: false\n  error: false\n  echo: false\n  output: asis\n---\n\n\n\n\n\n<!-- Чанк для пред. настроек -->\n\n\n\n\n\n<!-- END -->\n\n\n\n## Цель анализа\n\nГлавная цель — понять качество входящих звонков из платной выдачи поисковых систем (рекламные кампании в Я.Директ) без привязки к CRM системе для косвенной оценки эффективности рекламных кампаний.\n\nОсновная гипотеза — проведя текстовый анализ мы увидим, с каким интересом (интентом, потребностью, намерением) обращаются клиенты в компанию. Если потребность соответствует деятельности компании, то трафик можно считать релевантным и качественным, а значит рекламные кампании работает правильно, т.е. привлекает целевую аудиторию. Таким образом наша нулевая и альтернативные гипотезы звучат следующим образом:\n\n- $H_0$ — разницы между интентом входящих звонков из платного канала и деятельностью компании нет. Это хороший исход.\n- $A$ — разница есть, а значит трафик не релевантный и рекламные кампании привлекают не целевую аудиторию.\n\n:::{.notes}\nВажно отметить, что доказывать релевантность платного трафика будем через сравнение с органическим трафиком (трафик из поисковых систем), так как органический трафик считается эталоном по качеству входящих звонков, при условии, что мы принимает тот факт, что SEO оптимизация сайта сделана на высоком уровне. \n:::\n\n\n\n## Вводные данные\n\n- Рекламная кампания дается в поисковой системе Яндекс по направлению продажи тракторов.\n- Анализируемый период с 10.03.2023 по 12.04.2023.\n- За период зафиксировано $369$ звонков с платных и органических каналов.\n- Файл выгрузка с транскрибацией входящих звонков содержит $14\\ 623$ строк.\n\n\n\n\n## Загрузка и подготовка данных\n\nЗагрузим таблицу с данными, которая содержит транскрибацию входящих звонков.\n\n\n\n\n\n::: {.cell-output-display}\n```{=html}\n<div class=\"datatables html-widget html-fill-item\" id=\"htmlwidget-7413a79aa6d35499ac2c\" style=\"width:100%;height:auto;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-7413a79aa6d35499ac2c\">{\"x\":{\"filter\":\"none\",\"vertical\":false,\"data\":[[\"organic\",\"organic\",\"organic\",\"organic\",\"organic\"],[\"Все регионы\",\"Все регионы\",\"Все регионы\",\"Все регионы\",\"Все регионы\"],[\"2023-04-12T14:55:02Z\",\"2023-04-12T14:55:02Z\",\"2023-04-12T14:55:02Z\",\"2023-04-12T14:55:02Z\",\"2023-04-12T14:55:02Z\"],[18269572,18269572,18269572,18269572,18269572],[\"повторный\",\"повторный\",\"повторный\",\"повторный\",\"повторный\"],[\"Клиент\",\"Клиент\",\"Оператор\",\"Клиент\",\"Оператор\"],[\"05:40\",\"05:43\",\"05:45\",\"05:52\",\"05:56\"],[\"Угу.\",\"А почему?\",\"Потому что мы территориально закреплены Краснодарскому краю и Республики Адыгея.\",\"А мы в Крыму не можем купить почему то.\",\"Давайте я запишу ваш номер телефона.\"]],\"container\":\"<table class=\\\"compact nowrap\\\">\\n  <thead>\\n    <tr>\\n      <th>Медиум<\\/th>\\n      <th>Город<\\/th>\\n      <th>Дата<\\/th>\\n      <th>ID звонка<\\/th>\\n      <th>Первичный звонок<\\/th>\\n      <th>Канал<\\/th>\\n      <th>Время<\\/th>\\n      <th>Фраза<\\/th>\\n    <\\/tr>\\n  <\\/thead>\\n<\\/table>\",\"options\":{\"pageLength\":10,\"dom\":\"Btpli\",\"language\":{\"url\":\"//cdn.datatables.net/plug-ins/1.13.6/i18n/ru.json\"},\"columnDefs\":[{\"className\":\"dt-right\",\"targets\":3},{\"name\":\"Медиум\",\"targets\":0},{\"name\":\"Город\",\"targets\":1},{\"name\":\"Дата\",\"targets\":2},{\"name\":\"ID звонка\",\"targets\":3},{\"name\":\"Первичный звонок\",\"targets\":4},{\"name\":\"Канал\",\"targets\":5},{\"name\":\"Время\",\"targets\":6},{\"name\":\"Фраза\",\"targets\":7}],\"order\":[],\"autoWidth\":false,\"orderClasses\":false}},\"evals\":[],\"jsHooks\":[]}</script>\n```\n:::\n\n\n\n<br/>\n\nДалее преобразуем таблицу для дальнейшего анализа. \n\n- уберем стоп-слова и служебные части речи\n- проведем токенизацию слов для дальнейшего анализа\n- приведем столбцы в нужный формат\n\n\n\n\n\n\n::: {.cell-output-display}\n```{=html}\n<div class=\"datatables html-widget html-fill-item\" id=\"htmlwidget-a251224012dfb849206b\" style=\"width:100%;height:auto;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-a251224012dfb849206b\">{\"x\":{\"filter\":\"none\",\"vertical\":false,\"data\":[[\"organic\",\"organic\",\"organic\",\"organic\",\"organic\"],[\"Все регионы\",\"Все регионы\",\"Все регионы\",\"Все регионы\",\"Все регионы\"],[\"2023-04-12\",\"2023-04-12\",\"2023-04-12\",\"2023-04-12\",\"2023-04-12\"],[18269572,18269572,18269572,18269572,18269572],[\"повторный\",\"повторный\",\"повторный\",\"повторный\",\"повторный\"],[\"Клиент\",\"Оператор\",\"Оператор\",\"Оператор\",\"Оператор\"],[\"01:57\",\"01:57\",\"01:57\",\"02:00\",\"02:00\"],[\"трактор\",\"примеру\",\"трактору\",\"спереди\",\"поставить\"],[\"15 Apr\",\"15 Apr\",\"15 Apr\",\"15 Apr\",\"15 Apr\"],[\"3 Wed\",\"3 Wed\",\"3 Wed\",\"3 Wed\",\"3 Wed\"],[\"18269572\",\"18269572\",\"18269572\",\"18269572\",\"18269572\"],[100,101,102,103,104]],\"container\":\"<table class=\\\"compact nowrap\\\">\\n  <thead>\\n    <tr>\\n      <th>Медиум<\\/th>\\n      <th>Город<\\/th>\\n      <th>Дата<\\/th>\\n      <th>ID звонка<\\/th>\\n      <th>Первичный звонок<\\/th>\\n      <th>Канал<\\/th>\\n      <th>Время<\\/th>\\n      <th>Слово<\\/th>\\n      <th>Неделя<\\/th>\\n      <th>День<\\/th>\\n      <th>ID<\\/th>\\n      <th>N<\\/th>\\n    <\\/tr>\\n  <\\/thead>\\n<\\/table>\",\"options\":{\"pageLength\":10,\"dom\":\"Btpli\",\"language\":{\"url\":\"//cdn.datatables.net/plug-ins/1.13.6/i18n/ru.json\"},\"columnDefs\":[{\"className\":\"dt-right\",\"targets\":[3,11]},{\"name\":\"Медиум\",\"targets\":0},{\"name\":\"Город\",\"targets\":1},{\"name\":\"Дата\",\"targets\":2},{\"name\":\"ID звонка\",\"targets\":3},{\"name\":\"Первичный звонок\",\"targets\":4},{\"name\":\"Канал\",\"targets\":5},{\"name\":\"Время\",\"targets\":6},{\"name\":\"Слово\",\"targets\":7},{\"name\":\"Неделя\",\"targets\":8},{\"name\":\"День\",\"targets\":9},{\"name\":\"ID\",\"targets\":10},{\"name\":\"N\",\"targets\":11}],\"order\":[],\"autoWidth\":false,\"orderClasses\":false}},\"evals\":[],\"jsHooks\":[]}</script>\n```\n:::\n\n\n<br/>\n\nВ итоге получили фрейм данных в котором фразы были разбиты на слова, при этом очищенный от стоп слов (предлоги, союзы, знаки препинания и т.п.)\n\n\n\n\n## Анализ активности во времени по кол-ву слов\n\nРассмотрим кол-во слов распределенных на временном промежутке.\n\n\n>**График: Активность по дням**\n\n\n![](call_analysis_files/figure-html/unnamed-chunk-8-1.png){width=672}\n\n\n\nСтат данные к графику.\n\n\n::: {.cell-output-display}\n`````{=html}\n<table class=\" lightable-paper lightable-hover\" style='font-family: \"Arial Narrow\", arial, helvetica, sans-serif; margin-left: auto; margin-right: auto;'>\n <thead>\n  <tr>\n   <th style=\"text-align:right;\"> mn </th>\n   <th style=\"text-align:right;\"> md </th>\n   <th style=\"text-align:right;\"> sd </th>\n   <th style=\"text-align:right;\"> se </th>\n   <th style=\"text-align:right;\"> max </th>\n   <th style=\"text-align:right;\"> min </th>\n   <th style=\"text-align:right;\"> delta </th>\n   <th style=\"text-align:right;\"> total </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:right;\"> 998 </td>\n   <td style=\"text-align:right;\"> 1076 </td>\n   <td style=\"text-align:right;\"> 778 </td>\n   <td style=\"text-align:right;\"> 121 </td>\n   <td style=\"text-align:right;\"> 2508 </td>\n   <td style=\"text-align:right;\"> 10 </td>\n   <td style=\"text-align:right;\"> 2498 </td>\n   <td style=\"text-align:right;\"> 40926 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n\n\n\n<br/>\n\n>**График: Активность по неделям**\n\n\n![](call_analysis_files/figure-html/unnamed-chunk-10-1.png){width=672}\n\n\n\n**Вывод**\n\nНа графике видим волнообразную структуру данных, которая согласуется с днями недели. Виден четкий тренд на увеличение кол-ва слов (синяя линия), об этом также свидетельствует положительный коэффициент корреляции $R=0.14$. Это может говорить о том, что кол-во звонков со временем поступает больше. \n\nТакже по красной линии тренда видно, что пик по кол-ву слов пришёлся на март и на вторую неделю апреля.\n\nВ среднем за период в разговоре и у клиента и у оператора употребляется от $220$ до $1\\ 776$ слов, в среднем $998$. Всего за анализируемый период было произнесено почти $41\\ 000$ слов\n\nЧто касается дней недели. Самые активные недели были $11$ и $12$ недели марта. При этом отметим что $13$ неделя апреля пришлась на субботу и воскресенье, а так как в эти дни активности почти нет, то на графике также их не будет.\n\nРассмотрим самые активные дни недели с точки зрения использования слов.\n\n\n> **График: Самые активные дни недели**\n\n\n![](call_analysis_files/figure-html/unnamed-chunk-11-1.png){width=672}\n\n\n\n**Вывод**\n\nСамые активные дни недели с точки зрения употребления слов со среды по пятницу. Что согласуется с кол-вом поступающих звонков на эти дни. Самые не активные дни суббота и воскресенье.\n\n\n<br/>\n\n\n\n\n## Сегментный анализ\n\nРассмотрим кол-во употребляемых слов в разрезе «оператор и клиент».\n\n\n>**График: сегменты в разрезе оператор / клиент**\n\n\n![](call_analysis_files/figure-html/unnamed-chunk-12-1.png){width=672}\n\n\n\n**Вывод**\n\nНа графике видно, что оператор использует почти в два раза больше слов, чем клиент. Возможно разница связан с работой автоответчка, а также с использованием операторами уточняющих слов.\n\n\n<br/>\n\n\n>**График: Тренд по словам по оператору и клиенту**\n\n\n![](call_analysis_files/figure-html/unnamed-chunk-13-1.png){width=672}\n\n\n\n**Вывод**\n\nНаблюдаем положительный рост по кол-ву слов у оператора. У клиентов кол-во слов практически не изменяется. С учетом роста повторных звонков, возможно, приходится уделять больше внимание клиенту, который находится ближе к этапу сделки.\n\n\n<br/>\n\n\n>**График: Кол-во слов в разрезе каналов по параметру «повторный»**\n\n\n![](call_analysis_files/figure-html/unnamed-chunk-14-1.png){width=672}\n\n\n**Вывод**\n\nВидно, что кол-во слов при повторном и первичном звонке отличается. Клиент и оператор используют больше слов при первичном звонке, при этом это на зависит от канала из которого пришел клиент, пропорция соблюдается.\n\n\n<br/>\n\n\n\n\n## Анализ частотности слов\n\nДанный анализ покажет какие ключевые слова используются наиболее часто в разговоре в различных срезах. Это даст первое понимание о совпадении интента клиентов с деятельностью компании.\n\nРассмотрим частотность слов в разрезе оператор клиент.\n\n>**График: Частотность слов в разрезе оператор - клиент**\n\n\n\n\n\n\n![](call_analysis_files/figure-html/unnamed-chunk-17-1.png){width=672}\n\n\n\n**Вывод**\n\nУ оператора мы видим ответ автоответчика, что объясняет почему оператор употребляет в два раза больше слов чем клиент. У клиента видим слова связанные с деятельностью компании. Первый признак совпадения интента.\n\nСравним ключевые слова у клиентов из органического и платного трафика. Сравниваем именно с органическим трафиком потому что считаем, что из данного канала приходят наиболее релевантные клиенты по отношению к деятельности компании.\n\nПредварительно уберем из данных ряд мусорных слов, которые не несут смысловой нагрузки. В таблице приведен пример таких слов.\n\n\n>**Таблица: Минус-слова**\n\n\n\n\n::: {.cell-output-display}\n`````{=html}\n<table class=\" lightable-paper lightable-hover\" style='font-size: 12px; font-family: \"Arial Narrow\", arial, helvetica, sans-serif; margin-left: auto; margin-right: auto;'>\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> Слово </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> ага </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> угу </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> понял </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> скажите </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> подскажите </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n\n\n\n<br/>\n\n\n>**График: Частотность слов по клиентам в разрезе каналов**\n\n\n\n\n\n\n![](call_analysis_files/figure-html/unnamed-chunk-22-1.png){width=672}\n\n\n\n**Вывод**\n\nВизуально можно увидеть, что по частотности слов у клиентов из органического и платного трафика слова практически совпадают. Интересуют в первую очередь трактора, при этом в платном канале также интересуют погрузчики и оборудование. Клиенты интересуются наличием и запрашивают коммерческое предложение. Также в платном канале интересуются лизингом.\n\n\n<br/>\n\n\n\n## Анализ ассоциированности ключевых слов\n\nОднако, нас интересует не только кол-во слов, но и как они взаимосвязаны между собой. Найдем наиболее соотносимые (ассоциированные) ключевые слова через коэффициент $phi$. Данный Коэффициент эквивалентен корреляции Пирсона.\n\n\n>**График: Пример ассоциативности ключевых слов**\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n![](call_analysis_files/figure-html/unnamed-chunk-29-1.png){width=672}\n\n\n\n<br/>\n\n\nНа графике мы видим ключевые слова и ассоциированные слова на оси $y$, а также видна сила корреляции по оси $x$. Таким образом можно провести анализ запросов входящих звонков и дополнительно проверить, чем интересуются клиенты. В данном случаи запросы клиентов полностью совпадают с деятельностью компании.\n\nТакже можно построить граф, где будут отображены кластеры слов и их взаимосвязь, что позволит взглянуть на картину с еще большего масштаба.\n\n\n<br/>\n\n\n>**Граф: Кластеры и ассоциативность между словами**\n\n\n![](call_analysis_files/figure-html/unnamed-chunk-30-1.png){width=672}\n\n\n\n**Вывод**\n\nНа графе отображены взаимосвязи с силой выше $0,06$ иначе граф получается не разборчив. На графе можно увидеть кластеры и наиболее сильные взаимосвязи. Например, пара «коммерческое предложение» соединена темной толстой линией. Это означает сильную ассоциативную взаимосвязь между словами. \n\nИспользуя графы и таблицы можно найти главные интересы клиентов, что будет полезно для маркетологов, менеджеров по продажам и трафик менеджеров.\n\n\n<br/>\n\n\n\n\n## Корреляционный анализ каналов\n\nПроведем корреляционный анализ, чтобы убедиться наверняка с точки зрения статистики, что запросы у клиентов из разных каналов совпадают.\n\n\n>**График: Сравнение частотности слов у клиентов в разрезе каналов**\n\n\n\n\n![](call_analysis_files/figure-html/unnamed-chunk-32-1.png){width=960}\n\n\n\n**Вывод**\n\nСлова, близкие к пунктирной линии на графиках, имеют сходные частоты в обоих наборах текстов, в то время как те, которые находятся далеко от линии, встречаются чаще в одном наборе текстов, чем в другом.\n\nНапример, слова «банк», «инн», «краснодаре», «погрузчик» встречаются чаще в платном канале (СРС), тогда как слова «доставка», «беларус», «вал» встречаются чаще в органическом трафике.\n\nСлова которые употребляются в обоих каналах часто «трактор», «восемьдесят», «коммерческое», «предложение».\n\nОбратим внимание, что множество слов распространяются на более низкие частоты (облако точек сосредоточено в нижнем левом углу графика). Эта характеристика указывают на то, что клиенты из обеих каналов используют большой объём низкочастотных слов при общении. \n\nКоличественно оценим, насколько похожи и различаются эти наборы частот слов, используя корреляционный тест. \n\n\n\n\n\nЗначение корреляции\n\n\n[1] \"corr: 0.891777092174326\"\n\n\nЗначение p-value\n\n\n[1] \"p-value: 5.74199052548605e-254\"\n\n\n\n**Вывод**\n\nТест показывает, что частота употребления слов сильно коррелирует между каналами. На это указывает коэффициент корреляции $cor≈0,9$ (при норме $0,6$ и чем ближе к $1$, тем выше корреляция). При этом уровень достоверности теста высокий и явно ниже $0,05$ на это указывает $p-value$ с $16$ знаками после запятой. Т.е. клиенты из данных каналов используют сопоставимый по объему и смыслу слова.\n\n\nТакже мы можем доказать схожесть набора текстовых данных через Закон Ципфа.\n\n\n<br/>\n\n\n\n\n## Закон Ципфа\n\nЗакон Ципфа (Zipf’s law) – имперический закон, согласно которому частота появления слова обратно пропорциональна его рангу. Т.е. чем реже встречается слово в наборе данных, тем выше ранг. Вычисляете по формуле:\n\n$$freq(r)=A \\times N \\times r^{-1}$$\n\n- $freq(r)$ – частотность слова с рангом $r$\n- $r$ — ранг слова в списке слов, упорядоченных по убыванию частоты\n- $N$ – общее количество слов или символов в тексте\n- $A$ – константа, которая зависит от конкретного текста и языка, обычно $0.1$\n\nФормула говорит, что если ранг слова увеличивается в два раза, то его частота встречаемости уменьшается в два раза. С другой стороны, чем меньше ранг слова, тем выше его частота встречаемости.\n\nРассмотрим как распределились слова по частотности в разрезе каналов (переменная $TF$ по оси $x$).\n\n<br/>\n\n\n>**График: Распределение частотности слов в разрезе каналов**\n\n\n\n\n\n\n\n\n![](call_analysis_files/figure-html/unnamed-chunk-39-1.png){width=672}\n\n\n\n**Вывод**\n\nНа графике, в обоих наборах данных видим длинные хвосты т.е. чрезвычайно редкие слова. График демонстрирует схожее распределение для каналов, с большим количеством слов, которые встречаются редко, и меньшим количеством слов, которые встречаются часто.\n\nЗакон Ципфа визуализируется путем построения ранга по оси $x$ и частоты членов по оси $y$ в логарифмических масштабах. При построении графика таким образом, обратно пропорциональная зависимость будет иметь постоянный отрицательный наклон.\n\n<br/>\n\n\n>**График: Закон Ципфа**\n\n\n\n\n![](call_analysis_files/figure-html/unnamed-chunk-41-1.png){width=672}\n\n\n\n**Вывод**\n\nВидим на графике, что оба текстовых набора данных по каналам очень похожи между собой и что зависимость между рангом и частотой имеет отрицательный наклон (чем выше ранг, тем ниже частотность $TF$). \n\nОсобое внимание на пунктирную линию. Это значение степенного закона средней части набора данных для слов с рангом от $10$ до $500$. Мы видим, что основная масса слов лежит на пунктирной линии, при этом обе линии накладываются друг на друга. Что говорит о высокой схожести набора данных. Это доказывает, что обращения из платного канала схожи с обращениями из органической выдачи.\n\n\n<br/>\n\n\n## Вывод по текстовому анализу\n\nС помощью двух методов анализа (корреляционный анализ и закон Ципфа), мы доказали схожесть текстовых набора данных между платным и органическим каналами. Таким образом принимаем нашу нулевую гипотезу о том, что разницы между интеном во входящих звонках из платного канала и входящих звонках из органического трафика НЕТ. Т.е. клиенты из обеих каналов обращаются в компанию с одними и теми же интересами.\n\nПринимаем гипотезу:\n\n- H0 — разницы между интентом входящих звонков из платного канала и деятельностью компании нет.\n\nДанный анализ применим и для других источников трафика, главное условие это наличие качественного органического трафика, либо набора ключевых слов (семантическое ядро), которые описывают деятельность компании.",
    "supporting": [
      "call_analysis_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<script src=\"../site_libs/htmlwidgets-1.6.4/htmlwidgets.js\"></script>\r\n<link href=\"../site_libs/datatables-css-0.0.0/datatables-crosstalk.css\" rel=\"stylesheet\" />\r\n<script src=\"../site_libs/datatables-binding-0.31/datatables.js\"></script>\r\n<script src=\"../site_libs/jquery-3.6.0/jquery-3.6.0.min.js\"></script>\r\n<link href=\"../site_libs/dt-core-1.13.6/css/jquery.dataTables.min.css\" rel=\"stylesheet\" />\r\n<link href=\"../site_libs/dt-core-1.13.6/css/jquery.dataTables.extra.css\" rel=\"stylesheet\" />\r\n<script src=\"../site_libs/dt-core-1.13.6/js/jquery.dataTables.min.js\"></script>\r\n<link href=\"../site_libs/crosstalk-1.2.1/css/crosstalk.min.css\" rel=\"stylesheet\" />\r\n<script src=\"../site_libs/crosstalk-1.2.1/js/crosstalk.min.js\"></script>\r\n<script src=\"../site_libs/kePrint-0.0.1/kePrint.js\"></script>\r\n<link href=\"../site_libs/lightable-0.0.1/lightable.css\" rel=\"stylesheet\" />\r\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}